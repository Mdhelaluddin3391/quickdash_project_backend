<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>QuickDash — HR Panel (Premium)</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<style>
:root{
  --bg:#05091a;
  --bg-elevated:#0b1124;
  --bg-soft:#0f172a;
  --border-soft:rgba(148,163,184,0.18);
  --text-main:#e5edff;
  --text-muted:#94a3b8;
  --accent1:#7c3aed;
  --accent2:#22d3ee;
  --danger:#fb7185;
  --success:#4ade80;
  --warning:#facc15;
  --radius-lg:14px;
  --radius-md:10px;
  --shadow-soft:0 18px 60px rgba(15,23,42,0.9);
}
*,
*::before,
*::after{
  box-sizing:border-box;
}
body{
  margin:0;
  padding:18px;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Inter",sans-serif;
  background:
    radial-gradient(circle at top left,rgba(124,58,237,0.22),transparent 55%),
    radial-gradient(circle at bottom right,rgba(34,211,238,0.18),transparent 55%),
    var(--bg);
  color:var(--text-main);
}

/* ===== Header ===== */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:18px;
}
.header-left{
  display:flex;
  gap:12px;
  align-items:center;
}
.logo{
  width:46px;
  height:46px;
  border-radius:16px;
  background:radial-gradient(circle at 10% 0%,#e0f2fe 0,#22d3ee 32%,#7c3aed 70%,#0f172a 100%);
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 12px 30px rgba(56,189,248,0.4);
  font-weight:800;
  font-size:18px;
  letter-spacing:1px;
}
.logo span{
  text-shadow:0 0 12px rgba(15,23,42,0.7);
}
.header-title-main{
  font-weight:700;
  font-size:19px;
}
.header-sub{
  color:var(--text-muted);
  font-size:13px;
}
.header-right{
  display:flex;
  align-items:center;
  gap:10px;
}
.header-pill{
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,0.35);
  font-size:12px;
  color:var(--text-muted);
  display:flex;
  align-items:center;
  gap:6px;
  backdrop-filter:blur(12px);
  background:linear-gradient(135deg,rgba(15,23,42,0.7),rgba(15,23,42,0.3));
}
.avatar{
  width:34px;
  height:34px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,0.4);
  background:linear-gradient(135deg,#1d283a,#020617);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:14px;
}

/* ===== Buttons ===== */
.btn{
  border:none;
  border-radius:999px;
  padding:8px 14px;
  font-size:13px;
  font-weight:500;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  gap:7px;
  white-space:nowrap;
}
.btn-primary{
  background:linear-gradient(90deg,var(--accent1),var(--accent2));
  color:#0f172a;
  box-shadow:0 0 18px rgba(56,189,248,0.55);
}
.btn-ghost{
  background:rgba(15,23,42,0.85);
  color:var(--text-muted);
  border:1px solid rgba(148,163,184,0.35);
}
.btn-icon{
  width:30px;
  height:30px;
  padding:0;
  border-radius:999px;
  justify-content:center;
}
.btn:hover{
  transform:translateY(-1px);
  box-shadow:0 10px 24px rgba(15,23,42,0.9);
}
.btn:active{
  transform:translateY(0);
  box-shadow:none;
}

/* ===== Layout ===== */
.layout{
  display:grid;
  grid-template-columns:2.1fr 1.1fr;
  gap:18px;
}
@media(max-width:980px){
  .layout{
    grid-template-columns:1fr;
  }
}

/* ===== Cards & Stats ===== */
.card{
  background:radial-gradient(circle at top left,rgba(148,163,184,0.14),transparent 50%),
             linear-gradient(145deg,rgba(15,23,42,0.96),rgba(15,23,42,0.86));
  border-radius:var(--radius-lg);
  border:1px solid var(--border-soft);
  padding:14px 14px 13px;
  box-shadow:var(--shadow-soft);
  position:relative;
  overflow:hidden;
}
.card::before{
  content:"";
  position:absolute;
  inset:-1px;
  border-radius:inherit;
  background:conic-gradient(from 180deg at 0% 0%,rgba(124,58,237,0.3),transparent,rgba(56,189,248,0.28),transparent,rgba(124,58,237,0.3));
  opacity:0;
  transition:opacity .4s;
  z-index:-1;
}
.card:hover::before{
  opacity:0.6;
}
.card-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:8px;
}
.card-title{
  font-size:14px;
  font-weight:600;
}
.card-sub{
  font-size:12px;
  color:var(--text-muted);
}

/* Stat cards */
.stats-row{
  display:grid;
  grid-template-columns:repeat(4,minmax(0,1fr));
  gap:12px;
  margin-bottom:14px;
}
@media(max-width:1100px){
  .stats-row{
    grid-template-columns:repeat(2,minmax(0,1fr));
  }
}
@media(max-width:640px){
  .stats-row{
    grid-template-columns:1fr;
  }
}
.stat-card{
  padding:10px;
  border-radius:var(--radius-md);
  background:radial-gradient(circle at 0 0,rgba(56,189,248,0.18),transparent 55%);
  border:1px solid rgba(148,163,184,0.35);
}
.stat-label{
  font-size:11px;
  color:var(--text-muted);
}
.stat-value{
  margin-top:4px;
  font-size:18px;
  font-weight:700;
}
.stat-pill{
  margin-top:5px;
  font-size:11px;
  padding:3px 7px;
  border-radius:999px;
  display:inline-flex;
  align-items:center;
  gap:4px;
}
.stat-pill.success{
  background:rgba(22,163,74,0.14);
  color:#bbf7d0;
}
.stat-pill.warn{
  background:rgba(234,179,8,0.18);
  color:#fef9c3;
}

/* ===== Inputs ===== */
.input, select{
  background:rgba(15,23,42,0.9);
  border-radius:999px;
  border:1px solid rgba(148,163,184,0.5);
  padding:8px 12px;
  font-size:13px;
  color:var(--text-main);
  outline:none;
}
.input::placeholder{
  color:var(--text-muted);
}
.input:focus, select:focus{
  border-color:#38bdf8;
  box-shadow:0 0 0 1px rgba(56,189,248,0.5);
}
select{
  padding-right:28px;
  appearance:none;
  background-image:linear-gradient(45deg,#94a3b8 40%,transparent 40%),linear-gradient(135deg,#94a3b8 40%,transparent 40%);
  background-position:calc(100% - 13px) 10px,calc(100% - 8px) 10px;
  background-size:4px 4px,4px 4px;
  background-repeat:no-repeat;
}
.filters-row{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-bottom:10px;
}

/* ===== Employees Table ===== */
.table-wrapper{
  max-height:330px;
  overflow:auto;
  margin-top:4px;
}
.table{
  width:100%;
  border-collapse:collapse;
  font-size:13px;
}
.table th,
.table td{
  padding:8px 6px;
  text-align:left;
  border-bottom:1px solid rgba(30,41,59,0.9);
}
.table th{
  font-size:11px;
  text-transform:uppercase;
  letter-spacing:.04em;
  color:var(--text-muted);
}
.tr-row{
  cursor:pointer;
}
.tr-row:hover{
  background:rgba(15,23,42,0.9);
}
.emp-name{
  display:flex;
  align-items:center;
  gap:8px;
}
.emp-avatar{
  width:30px;
  height:30px;
  border-radius:999px;
  background:radial-gradient(circle at 30% 0,rgba(248,250,252,0.95),rgba(30,64,175,0.9));
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:13px;
  font-weight:600;
  color:#020617;
}
.badge{
  font-size:11px;
  padding:3px 8px;
  border-radius:999px;
}
.badge.green{
  background:rgba(22,163,74,0.16);
  color:#bbf7d0;
}
.badge.red{
  background:rgba(220,38,38,0.16);
  color:#fecaca;
}
.badge.yellow{
  background:rgba(234,179,8,0.16);
  color:#fef9c3;
}
.badge.gray{
  background:rgba(100,116,139,0.4);
  color:#e2e8f0;
}
.row-actions{
  display:flex;
  gap:6px;
}

/* Scrollbar */
.table-wrapper::-webkit-scrollbar,
.activity-list::-webkit-scrollbar{
  width:6px;
}
.table-wrapper::-webkit-scrollbar-track,
.activity-list::-webkit-scrollbar-track{
  background:transparent;
}
.table-wrapper::-webkit-scrollbar-thumb,
.activity-list::-webkit-scrollbar-thumb{
  background:#1e293b;
  border-radius:999px;
}

/* ===== Right Column Cards ===== */
.mini-metric{
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:13px;
  margin-top:6px;
}
.bar-chart{
  margin-top:10px;
  display:flex;
  gap:4px;
  align-items:flex-end;
  height:70px;
}
.bar{
  flex:1;
  border-radius:999px;
  background:linear-gradient(to top,#1d4ed8,#22d3ee);
  position:relative;
}
.bar::after{
  content:attr(data-label);
  position:absolute;
  inset-inline:0;
  bottom:-16px;
  font-size:9px;
  text-align:center;
  color:var(--text-muted);
}

/* ===== Role Permissions ===== */
.permissions-table{
  width:100%;
  border-collapse:collapse;
  margin-top:8px;
  font-size:11px;
}
.permissions-table th,
.permissions-table td{
  padding:6px 4px;
  text-align:center;
  border-bottom:1px solid rgba(30,41,59,0.85);
}
.permissions-table th:first-child,
.permissions-table td:first-child{
  text-align:left;
}
.perm-dot{
  width:14px;
  height:14px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,0.6);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:9px;
}
.perm-dot.active{
  background:radial-gradient(circle,#22c55e,#0f172a);
  border-color:#22c55e;
}

/* ===== Activity Log ===== */
.activity-list{
  font-size:11.5px;
  margin-top:8px;
  max-height:140px;
  overflow:auto;
}
.activity-item{
  display:flex;
  gap:8px;
  padding:5px 0;
  border-bottom:1px dashed rgba(30,41,59,0.9);
}
.activity-item i{
  margin-top:2px;
  font-size:10px;
  color:#38bdf8;
}
.activity-meta{
  color:var(--text-muted);
  font-size:10px;
}

/* ===== Employee Detail Drawer ===== */
.detail-drawer-backdrop{
  position:fixed;
  inset:0;
  background:rgba(15,23,42,0.65);
  display:none;
  align-items:stretch;
  justify-content:flex-end;
  z-index:40;
}
.detail-drawer-backdrop.open{
  display:flex;
}
.detail-drawer{
  width:340px;
  max-width:100%;
  background:radial-gradient(circle at top,rgba(56,189,248,0.26),transparent 60%),
             linear-gradient(145deg,#020617,#020617 18%,#020617 80%);
  border-left:1px solid rgba(148,163,184,0.45);
  padding:14px 14px 16px;
  box-shadow:-18px 0 45px rgba(15,23,42,0.95);
}
.detail-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.detail-main{
  margin-top:10px;
  font-size:13px;
}
.detail-line{
  margin-top:6px;
  display:flex;
  justify-content:space-between;
  gap:8px;
}
.detail-label{
  color:var(--text-muted);
  font-size:11px;
}
.detail-section-title{
  margin-top:10px;
  font-size:12px;
  font-weight:600;
  color:#bfdbfe;
}

/* ===== Add Employee Modal ===== */
.modal-backdrop{
  position:fixed;
  inset:0;
  background:rgba(15,23,42,0.7);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:50;
}
.modal-backdrop.open{
  display:flex;
}
.modal{
  width:360px;
  max-width:92%;
  background:linear-gradient(145deg,#020617,#020617 60%);
  border-radius:var(--radius-lg);
  border:1px solid rgba(148,163,184,0.55);
  padding:14px 14px 16px;
  box-shadow:var(--shadow-soft);
}
.modal h3{
  font-size:14px;
  margin-bottom:10px;
}
.form-row{
  margin-bottom:8px;
}
.form-row label{
  display:block;
  font-size:11px;
  margin-bottom:3px;
  color:var(--text-muted);
}
.modal-actions{
  margin-top:10px;
  display:flex;
  justify-content:flex-end;
  gap:8px;
}

/* Small text */
.small{
  font-size:12px;
  color:var(--text-muted);
}
</style>
</head>
<body>

<header class="header">
  <div class="header-left">
    <div class="logo"><span>HR</span></div>
    <div>
      <div class="header-title-main">QuickDash — HR Control Center</div>
      <div class="header-sub">Employees • Roles • Attendance • Payroll snapshot</div>
    </div>
  </div>
  <div class="header-right">
    <div class="header-pill">
      <i class="fa-regular fa-circle-check"></i>
      <span>Sync status: Live</span>
    </div>
    <button class="btn btn-ghost" onclick="exportHR()">
      <i class="fa-solid fa-file-export"></i>
      Export
    </button>
    <div class="avatar"><i class="fa-regular fa-user"></i></div>
  </div>
</header>

<main class="layout">
  <!-- ===== Left Column ===== -->
  <section>
    <!-- Top Stats -->
    <div class="stats-row">
      <div class="stat-card">
        <div class="stat-label">Total Employees</div>
        <div class="stat-value" id="statTotalEmployees">0</div>
        <div class="stat-pill success">
          <i class="fa-solid fa-arrow-trend-up"></i>
          Active: <span id="statActiveEmployees">0</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-label">New Hires (This Month)</div>
        <div class="stat-value" id="statNewHires">4</div>
        <div class="stat-pill">
          <i class="fa-regular fa-calendar-check"></i>
          Joining pipeline healthy
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-label">On Leave Today</div>
        <div class="stat-value" id="statOnLeave">3</div>
        <div class="stat-pill warn">
          <i class="fa-solid fa-user-clock"></i>
          Balance stable
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Attrition (Last 30 days)</div>
        <div class="stat-value" id="statExited">1</div>
        <div class="stat-pill">
          <i class="fa-regular fa-face-smile"></i>
          Low risk
        </div>
      </div>
    </div>

    <!-- Employees Card -->
    <section class="card">
      <div class="card-header">
        <div>
          <div class="card-title">Employees</div>
          <div class="card-sub">Manage staff, roles & statuses</div>
        </div>
        <button class="btn btn-primary" onclick="openAddEmployeeModal()">
          <i class="fa-solid fa-user-plus"></i> Add
        </button>
      </div>

      <div class="filters-row">
        <div style="flex:1;min-width:160px;">
          <input id="empSearch" class="input" placeholder="Search name, email, phone..." />
        </div>
        <div>
          <select id="filterRole">
            <option value="All">All roles</option>
            <option value="Staff">Staff</option>
            <option value="Manager">Manager</option>
            <option value="HR">HR</option>
            <option value="Admin">Admin</option>
          </select>
        </div>
        <div>
          <select id="filterStatus">
            <option value="All">All status</option>
            <option value="Active">Active</option>
            <option value="On Leave">On Leave</option>
            <option value="Exited">Exited</option>
          </select>
        </div>
      </div>

      <div class="table-wrapper">
        <table class="table" id="tableEmployees">
          <thead>
            <tr>
              <th>Employee</th>
              <th>Role</th>
              <th>Dept</th>
              <th>Status</th>
              <th>Joined</th>
              <th style="text-align:right;">Actions</th>
            </tr>
          </thead>
          <tbody>
            <!-- JS fills -->
          </tbody>
        </table>
      </div>
      <div class="small" id="employeesMeta" style="margin-top:6px;"></div>
    </section>
  </section>

  <!-- ===== Right Column ===== -->
  <aside style="display:flex;flex-direction:column;gap:12px;">
    <section class="card">
      <div class="card-header">
        <div>
          <div class="card-title">Attendance</div>
          <div class="card-sub">Today’s snapshot</div>
        </div>
        <button class="btn btn-icon btn-ghost" onclick="alert('Attendance sync (demo)')">
          <i class="fa-solid fa-rotate"></i>
        </button>
      </div>
      <div class="mini-metric">
        <span>Present</span>
        <span><strong id="attPresent">68</strong></span>
      </div>
      <div class="mini-metric">
        <span>Absent</span>
        <span><strong id="attAbsent">4</strong></span>
      </div>
      <div class="mini-metric">
        <span>Avg. monthly attendance</span>
        <span>94%</span>
      </div>
      <div class="bar-chart">
        <div class="bar" style="height:40%;" data-label="Mon"></div>
        <div class="bar" style="height:60%;" data-label="Tue"></div>
        <div class="bar" style="height:85%;" data-label="Wed"></div>
        <div class="bar" style="height:70%;" data-label="Thu"></div>
        <div class="bar" style="height:90%;" data-label="Fri"></div>
      </div>
    </section>

    <section class="card">
      <div class="card-header">
        <div>
          <div class="card-title">Payroll</div>
          <div class="card-sub">Monthly payout overview</div>
        </div>
        <button class="btn btn-icon btn-ghost" onclick="openDocs()">
          <i class="fa-regular fa-file-lines"></i>
        </button>
      </div>
      <div class="mini-metric">
        <span>Pending payouts</span>
        <span><strong>₹ 1,20,000</strong></span>
      </div>
      <div class="mini-metric">
        <span>Employees in this cycle</span>
        <span><strong id="payrollCount">0</strong></span>
      </div>
      <div class="mini-metric">
        <span>Next payout date</span>
        <span>28 Nov</span>
      </div>
      <div class="mini-metric">
        <span>Approval status</span>
        <span class="badge yellow">Awaiting Manager sign-off</span>
      </div>
    </section>

    <section class="card">
      <div class="card-header">
        <div>
          <div class="card-title">Role Permissions</div>
          <div class="card-sub">Who can access what</div>
        </div>
      </div>
      <table class="permissions-table">
        <thead>
          <tr>
            <th>Role</th>
            <th>View</th>
            <th>Edit</th>
            <th>Payroll</th>
            <th>Admin</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Staff</td>
            <td><span class="perm-dot active"><i class="fa-solid fa-check"></i></span></td>
            <td><span class="perm-dot"></span></td>
            <td><span class="perm-dot"></span></td>
            <td><span class="perm-dot"></span></td>
          </tr>
          <tr>
            <td>Manager</td>
            <td><span class="perm-dot active"><i class="fa-solid fa-check"></i></span></td>
            <td><span class="perm-dot active"><i class="fa-solid fa-check"></i></span></td>
            <td><span class="perm-dot"></span></td>
            <td><span class="perm-dot"></span></td>
          </tr>
          <tr>
            <td>HR</td>
            <td><span class="perm-dot active"><i class="fa-solid fa-check"></i></span></td>
            <td><span class="perm-dot active"><i class="fa-solid fa-check"></i></span></td>
            <td><span class="perm-dot active"><i class="fa-solid fa-check"></i></span></td>
            <td><span class="perm-dot"></span></td>
          </tr>
          <tr>
            <td>Admin</td>
            <td><span class="perm-dot active"><i class="fa-solid fa-check"></i></span></td>
            <td><span class="perm-dot active"><i class="fa-solid fa-check"></i></span></td>
            <td><span class="perm-dot active"><i class="fa-solid fa-check"></i></span></td>
            <td><span class="perm-dot active"><i class="fa-solid fa-check"></i></span></td>
          </tr>
        </tbody>
      </table>
      <div class="small" style="margin-top:6px;">
        Map these permissions to your backend RBAC when you implement auth.
      </div>
    </section>

    <section class="card">
      <div class="card-header">
        <div>
          <div class="card-title">Activity Log</div>
          <div class="card-sub">Latest HR changes</div>
        </div>
      </div>
      <div class="activity-list" id="activityList">
        <!-- JS fills -->
      </div>
    </section>
  </aside>
</main>

<!-- ===== Employee Detail Drawer ===== -->
<div class="detail-drawer-backdrop" id="detailDrawer">
  <div class="detail-drawer">
    <div class="detail-header">
      <div class="emp-name">
        <div class="emp-avatar" id="detailAvatar">E</div>
        <div>
          <div id="detailName" style="font-weight:600;">Employee Name</div>
          <div class="small" id="detailRole">Role • Dept</div>
        </div>
      </div>
      <button class="btn btn-icon btn-ghost" onclick="closeDetailDrawer()">
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="detail-main">
      <div class="detail-section-title">Profile</div>
      <div class="detail-line">
        <span class="detail-label">Status</span>
        <span id="detailStatus"></span>
      </div>
      <div class="detail-line">
        <span class="detail-label">Joining date</span>
        <span id="detailJoin"></span>
      </div>
      <div class="detail-line">
        <span class="detail-label">Location</span>
        <span id="detailLocation"></span>
      </div>
      <div class="detail-line">
        <span class="detail-label">Contact</span>
        <span id="detailContact"></span>
      </div>

      <div class="detail-section-title">Work & Payroll</div>
      <div class="detail-line">
        <span class="detail-label">Monthly salary</span>
        <span id="detailSalary"></span>
      </div>
      <div class="detail-line">
        <span class="detail-label">Present this month</span>
        <span id="detailPresent"></span>
      </div>
      <div class="detail-line">
        <span class="detail-label">Absent this month</span>
        <span id="detailAbsent"></span>
      </div>
      <div class="detail-line">
        <span class="detail-label">Leaves left</span>
        <span id="detailLeaves"></span>
      </div>

      <div class="detail-section-title">Quick actions</div>
      <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:6px;">
        <button class="btn btn-ghost" onclick="alert('Mark leave (demo)')">
          <i class="fa-regular fa-calendar-minus"></i> Mark leave
        </button>
        <button class="btn btn-ghost" onclick="alert('Generate salary slip (demo)')">
          <i class="fa-regular fa-file-pdf"></i> Salary slip
        </button>
      </div>
    </div>
  </div>
</div>

<!-- ===== Add Employee Modal ===== -->
<div class="modal-backdrop" id="addEmployeeModal">
  <div class="modal">
    <h3>Add employee</h3>
    <form id="addEmployeeForm">
      <div class="form-row">
        <label for="addName">Full name</label>
        <input id="addName" class="input" required>
      </div>
      <div class="form-row">
        <label for="addEmail">Email</label>
        <input id="addEmail" class="input" placeholder="name@quickdash.in">
      </div>
      <div class="form-row">
        <label for="addPhone">Phone</label>
        <input id="addPhone" class="input" placeholder="+91 ...">
      </div>
      <div class="form-row" style="display:flex;gap:8px;">
        <div style="flex:1;">
          <label for="addRole">Role</label>
          <select id="addRole">
            <option>Staff</option>
            <option>Manager</option>
            <option>HR</option>
            <option>Admin</option>
          </select>
        </div>
        <div style="flex:1;">
          <label for="addDept">Department</label>
          <input id="addDept" class="input" placeholder="Ops / HR / Finance">
        </div>
      </div>
      <div class="form-row" style="display:flex;gap:8px;">
        <div style="flex:1;">
          <label for="addStatus">Status</label>
          <select id="addStatus">
            <option>Active</option>
            <option>On Leave</option>
            <option>Exited</option>
          </select>
        </div>
        <div style="flex:1;">
          <label for="addSalary">Salary (₹)</label>
          <input id="addSalary" class="input" type="number" min="0" placeholder="30000">
        </div>
      </div>
      <div class="modal-actions">
        <button type="button" class="btn btn-ghost" onclick="closeAddEmployeeModal()">Cancel</button>
        <button type="submit" class="btn btn-primary">Save</button>
      </div>
    </form>
  </div>
</div>

<script>
// ===== Data =====
const employees = [
  {
    id: 1,
    name: 'Rahul Sharma',
    role: 'Manager',
    department: 'Operations',
    status: 'Active',
    joinDate: '2023-01-12',
    salary: 42000,
    email: 'rahul@quickdash.in',
    phone: '+91 98765 00001',
    location: 'Mumbai',
    presentThisMonth: 18,
    absentThisMonth: 1,
    leavesLeft: 7
  },
  {
    id: 2,
    name: 'Imran Khan',
    role: 'Staff',
    department: 'Riders',
    status: 'On Leave',
    joinDate: '2023-07-05',
    salary: 26000,
    email: 'imran@quickdash.in',
    phone: '+91 98765 00002',
    location: 'Bengaluru',
    presentThisMonth: 15,
    absentThisMonth: 3,
    leavesLeft: 2
  },
  {
    id: 3,
    name: 'Neha Verma',
    role: 'HR',
    department: 'HR',
    status: 'Active',
    joinDate: '2022-11-20',
    salary: 38000,
    email: 'neha@quickdash.in',
    phone: '+91 98765 00003',
    location: 'Delhi',
    presentThisMonth: 19,
    absentThisMonth: 0,
    leavesLeft: 8
  },
  {
    id: 4,
    name: 'Arjun Mehta',
    role: 'Staff',
    department: 'Warehouse',
    status: 'Active',
    joinDate: '2024-04-10',
    salary: 24000,
    email: 'arjun@quickdash.in',
    phone: '+91 98765 00004',
    location: 'Pune',
    presentThisMonth: 17,
    absentThisMonth: 2,
    leavesLeft: 5
  }
];

const activityLog = [
  { icon:'fa-user-plus', text:'Neha added a new hire to Operations.', time:'2 min ago' },
  { icon:'fa-pen-to-square', text:'Rahul updated role for Arjun to Staff.', time:'15 min ago' },
  { icon:'fa-file-invoice', text:'Payroll draft generated for 68 employees.', time:'1 hr ago' },
  { icon:'fa-calendar-check', text:'Attendance synced from device #QDW-04.', time:'Today • 09:05 AM' }
];

const filters = {
  search: '',
  role: 'All',
  status: 'All'
};

// ===== Helpers =====
function getInitials(name){
  return name.split(' ').map(p=>p[0]).join('').toUpperCase().slice(0,2);
}

function formatDate(str){
  if(!str) return '-';
  const d = new Date(str);
  if(Number.isNaN(d.getTime())) return str;
  return d.toLocaleDateString('en-IN',{day:'2-digit',month:'short',year:'numeric'});
}

// ===== Rendering =====
function renderStats(){
  const total = employees.length;
  const active = employees.filter(e => e.status === 'Active').length;

  document.getElementById('statTotalEmployees').textContent = total;
  document.getElementById('statActiveEmployees').textContent = active;
  document.getElementById('payrollCount').textContent = active;
}

function renderActivity(){
  const list = document.getElementById('activityList');
  list.innerHTML = '';
  activityLog.slice(0,12).forEach(item => {
    const div = document.createElement('div');
    div.className = 'activity-item';
    div.innerHTML = `
      <i class="fa-solid ${item.icon}"></i>
      <div>
        <div>${item.text}</div>
        <div class="activity-meta">${item.time}</div>
      </div>
    `;
    list.appendChild(div);
  });
}

function renderEmployees(){
  const tbody = document.querySelector('#tableEmployees tbody');
  tbody.innerHTML = '';

  const filtered = employees.filter(emp => {
    const matchSearch =
      !filters.search ||
      emp.name.toLowerCase().includes(filters.search) ||
      (emp.email && emp.email.toLowerCase().includes(filters.search)) ||
      (emp.phone && emp.phone.toLowerCase().includes(filters.search));
    const matchRole = filters.role === 'All' || emp.role === filters.role;
    const matchStatus = filters.status === 'All' || emp.status === filters.status;
    return matchSearch && matchRole && matchStatus;
  });

  filtered.forEach(emp => {
    const tr = document.createElement('tr');
    tr.className = 'tr-row';
    tr.innerHTML = `
      <td>
        <div class="emp-name">
          <div class="emp-avatar">${getInitials(emp.name)}</div>
          <div>
            <div>${emp.name}</div>
            <div class="small">${emp.email || ''}</div>
          </div>
        </div>
      </td>
      <td>
        <select onchange="changeRole(event, ${emp.id})">
          <option ${emp.role==='Staff'?'selected':''}>Staff</option>
          <option ${emp.role==='Manager'?'selected':''}>Manager</option>
          <option ${emp.role==='HR'?'selected':''}>HR</option>
          <option ${emp.role==='Admin'?'selected':''}>Admin</option>
        </select>
      </td>
      <td>${emp.department || '-'}</td>
      <td>${renderStatusBadge(emp.status)}</td>
      <td>${formatDate(emp.joinDate)}</td>
      <td style="text-align:right;">
        <div class="row-actions">
          <button class="btn btn-icon btn-ghost" onclick="event.stopPropagation();openDetailDrawer(${emp.id})">
            <i class="fa-regular fa-eye"></i>
          </button>
          <button class="btn btn-icon btn-ghost" onclick="event.stopPropagation();removeEmp(${emp.id})">
            <i class="fa-regular fa-trash-can"></i>
          </button>
        </div>
      </td>
    `;
    tr.addEventListener('click', () => openDetailDrawer(emp.id));
    tbody.appendChild(tr);
  });

  document.getElementById('employeesMeta').textContent =
    filtered.length === employees.length
      ? `Showing ${filtered.length} employees`
      : `Showing ${filtered.length} of ${employees.length} employees (filtered)`;
}

function renderStatusBadge(status){
  let cls = 'gray';
  if(status === 'Active') cls = 'green';
  else if(status === 'On Leave') cls = 'yellow';
  else if(status === 'Exited') cls = 'red';
  return `<span class="badge ${cls}">${status}</span>`;
}

// ===== Detail Drawer =====
function openDetailDrawer(id){
  const emp = employees.find(e => e.id === id);
  if(!emp) return;
  document.getElementById('detailAvatar').textContent = getInitials(emp.name);
  document.getElementById('detailName').textContent = emp.name;
  document.getElementById('detailRole').textContent = `${emp.role} • ${emp.department || '—'}`;
  document.getElementById('detailStatus').innerHTML = renderStatusBadge(emp.status);
  document.getElementById('detailJoin').textContent = formatDate(emp.joinDate);
  document.getElementById('detailLocation').textContent = emp.location || '—';
  document.getElementById('detailContact').textContent =
    `${emp.email || '—'} • ${emp.phone || ''}`;
  document.getElementById('detailSalary').textContent =
    emp.salary ? `₹ ${emp.salary.toLocaleString('en-IN')}` : '—';
  document.getElementById('detailPresent').textContent =
    `${emp.presentThisMonth ?? '-'} days`;
  document.getElementById('detailAbsent').textContent =
    `${emp.absentThisMonth ?? '-'} days`;
  document.getElementById('detailLeaves').textContent =
    `${emp.leavesLeft ?? '-'} days`;

  document.getElementById('detailDrawer').classList.add('open');
}
function closeDetailDrawer(){
  document.getElementById('detailDrawer').classList.remove('open');
}
document.getElementById('detailDrawer').addEventListener('click', (e)=>{
  if(e.target.id === 'detailDrawer') closeDetailDrawer();
});

// ===== Actions =====
function changeRole(ev, id){
  const role = ev.target.value;
  const emp = employees.find(e => e.id === id);
  if(!emp) return;
  emp.role = role;
  activityLog.unshift({
    icon:'fa-user-gear',
    text:`${emp.name}'s role changed to ${role}.`,
    time:'Just now'
  });
  renderActivity();
}

function removeEmp(id){
  const emp = employees.find(e => e.id === id);
  if(!emp) return;
  if(!confirm(`Remove employee "${emp.name}" from HR view?`)) return;
  const idx = employees.findIndex(e => e.id === id);
  employees.splice(idx,1);
  activityLog.unshift({
    icon:'fa-user-xmark',
    text:`${emp.name} removed from active roster.`,
    time:'Just now'
  });
  renderEmployees();
  renderStats();
  renderActivity();
}

function exportHR(){
  alert('Export HR data (demo). Here you would trigger CSV/Excel export from backend.');
}

function openDocs(){
  alert('Open employee documents (demo). Hook this to your document storage later.');
}

// ===== Add Employee Modal =====
function openAddEmployeeModal(){
  document.getElementById('addEmployeeModal').classList.add('open');
}
function closeAddEmployeeModal(){
  document.getElementById('addEmployeeModal').classList.remove('open');
  document.getElementById('addEmployeeForm').reset();
}

document.getElementById('addEmployeeForm').addEventListener('submit', (e)=>{
  e.preventDefault();
  const name = document.getElementById('addName').value.trim();
  if(!name) return;
  const email = document.getElementById('addEmail').value.trim();
  const phone = document.getElementById('addPhone').value.trim();
  const role = document.getElementById('addRole').value;
  const department = document.getElementById('addDept').value.trim() || 'General';
  const status = document.getElementById('addStatus').value;
  const salaryVal = document.getElementById('addSalary').value;
  const salary = salaryVal ? Number(salaryVal) : null;

  employees.push({
    id: Date.now(),
    name,
    role,
    department,
    status,
    joinDate: new Date().toISOString().slice(0,10),
    salary,
    email,
    phone,
    location: '—',
    presentThisMonth: 0,
    absentThisMonth: 0,
    leavesLeft: 0
  });

  activityLog.unshift({
    icon:'fa-user-plus',
    text:`${name} added to ${department} as ${role}.`,
    time:'Just now'
  });

  closeAddEmployeeModal();
  renderEmployees();
  renderStats();
  renderActivity();
});

// Close modal on backdrop click
document.getElementById('addEmployeeModal').addEventListener('click',(e)=>{
  if(e.target.id === 'addEmployeeModal') closeAddEmployeeModal();
});

// ===== Filters & Search =====
document.getElementById('empSearch').addEventListener('input', (e)=>{
  filters.search = e.target.value.toLowerCase();
  renderEmployees();
});
document.getElementById('filterRole').addEventListener('change', (e)=>{
  filters.role = e.target.value;
  renderEmployees();
});
document.getElementById('filterStatus').addEventListener('change', (e)=>{
  filters.status = e.target.value;
  renderEmployees();
});

// ===== Initial render =====
renderEmployees();
renderStats();
renderActivity();
</script>
</body>
</html>
